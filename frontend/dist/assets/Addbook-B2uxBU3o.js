import{u as v,h as q,j as e,z as S}from"./index-D-tOdqmH.js";import{u as w}from"./index.esm-B4F8goqb.js";import{i as k}from"./index-Z-CY9DcK.js";import{u as M}from"./useMutation-BQtBaTbt.js";import{L as P}from"./LoadingSpinner-C_T4IjIo.js";import A from"./ErrorPage-B1K9zMSS.js";import{G as B}from"./iconBase-CDKiFw7w.js";function F(r){return B({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 16v.01"},child:[]},{tag:"path",attr:{d:"M6 16v.01"},child:[]},{tag:"path",attr:{d:"M12 5v.01"},child:[]},{tag:"path",attr:{d:"M12 12v.01"},child:[]},{tag:"path",attr:{d:"M12 1a4 4 0 0 1 2.001 7.464l.001 .072a3.998 3.998 0 0 1 1.987 3.758l.22 .128a3.978 3.978 0 0 1 1.591 -.417l.2 -.005a4 4 0 1 1 -3.994 3.77l-.28 -.16c-.522 .25 -1.108 .39 -1.726 .39c-.619 0 -1.205 -.14 -1.728 -.391l-.279 .16l.007 .231a4 4 0 1 1 -2.212 -3.579l.222 -.129a3.998 3.998 0 0 1 1.988 -3.756l.002 -.071a4 4 0 0 1 -1.995 -3.265l-.005 -.2a4 4 0 0 1 4 -4z"},child:[]}]})(r)}const I=()=>{const{user:r}=v(),n=q(),{isPending:l,isError:c,mutateAsync:m,reset:d}=M({mutationFn:async a=>await n.post("/books",a),onSuccess:a=>{console.log(a),S.success("Book Added successfully"),d()},onError:a=>{console.log(a)},onMutate:a=>{console.log("I will post this data--->",a)},onSettled:(a,i)=>{console.log("I am from onSettled--->",a),i&&console.log(i)},retry:3}),{register:t,handleSubmit:u,reset:p,formState:{errors:s}}=w(),x=async a=>{const{name:i,description:h,quantity:g,price:b,category:j,image:f}=a,N=f[0];try{const y={image:await k(N),name:i,description:h,quantity:Number(g),price:Number(b),category:j,seller:{image:r?.photoURL,name:r?.displayName,email:r?.email}};await m(y),p()}catch(o){console.log(o)}};return l?e.jsx(P,{}):c?e.jsx(A,{}):e.jsxs("form",{onSubmit:u(x),className:"space-y-6 max-w-xl",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Book Name"})}),e.jsx("input",{...t("name",{required:"Name is required"}),placeholder:"e.g. The Pragmatic Programmer",className:"input input-bordered w-full"}),s.name&&e.jsx("span",{className:"text-red-500 text-sm",children:s.name.message})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Description"})}),e.jsx("textarea",{...t("description",{required:"Description is required"}),placeholder:"Short description about the book",className:"textarea textarea-bordered w-full",rows:4}),s.description&&e.jsx("span",{className:"text-red-500 text-sm",children:s.description.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Quantity"})}),e.jsx("input",{...t("quantity",{required:"Quantity is required",min:{value:1,message:"Minimum 1"}}),type:"number",placeholder:"e.g. 10",className:"input input-bordered w-full"}),s.quantity&&e.jsx("span",{className:"text-red-500 text-sm",children:s.quantity.message})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Price ($)"})}),e.jsx("input",{...t("price",{required:"Price is required",min:{value:0,message:"Minimum 0"}}),type:"number",step:"0.01",placeholder:"e.g. 19.99",className:"input input-bordered w-full"}),s.price&&e.jsx("span",{className:"text-red-500 text-sm",children:s.price.message})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Category"})}),e.jsxs("select",{...t("category",{required:"Category is required"}),className:"select select-bordered w-full",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a category"}),e.jsx("option",{value:"Programming",children:"Programming"}),e.jsx("option",{value:"Fiction",children:"Fiction"}),e.jsx("option",{value:"Non-fiction",children:"Non-fiction"}),e.jsx("option",{value:"Science",children:"Science"}),e.jsx("option",{value:"Business",children:"Business"})]}),s.category&&e.jsx("span",{className:"text-red-500 text-sm",children:s.category.message})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-semibold",children:"Cover Image"})}),e.jsx("input",{...t("image",{required:"Image is required"}),type:"file",accept:"image/*",className:"file-input file-input-bordered w-full"}),s.image&&e.jsx("span",{className:"text-red-500 text-sm",children:s.image.message})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:l?e.jsx(F,{className:"animate-spin"}):"Add Book"})]})},G=()=>e.jsx("div",{children:e.jsx(I,{})});export{G as default};

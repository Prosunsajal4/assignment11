import{j as e,r as t,a as M,v as i,i as z,d as P}from"./index-D-tOdqmH.js";import{C as H}from"./Container-C__-NfC-.js";const V=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-lg animate-pulse",children:[e.jsx("div",{className:"h-72 bg-gray-200 dark:bg-gray-700 skeleton-loader"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"w-24 h-6 bg-gray-200 dark:bg-gray-700 rounded-full skeleton-loader"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-lg skeleton-loader"}),e.jsx("div",{className:"h-6 w-3/4 bg-gray-200 dark:bg-gray-700 rounded-lg skeleton-loader"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded skeleton-loader"}),e.jsx("div",{className:"h-4 w-5/6 bg-gray-200 dark:bg-gray-700 rounded skeleton-loader"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsx("div",{className:"w-20 h-8 bg-gray-200 dark:bg-gray-700 rounded-lg skeleton-loader"}),e.jsx("div",{className:"w-28 h-10 bg-gray-200 dark:bg-gray-700 rounded-xl skeleton-loader"})]})]})]}),W=({count:r=6})=>e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(r)].map((l,c)=>e.jsx(V,{},c))}),L=t.memo(({book:r,index:l=0})=>{const c=M(),[p,d]=t.useState(!1),[x,g]=t.useState(!1),h=t.useRef(null);t.useEffect(()=>{const n=new IntersectionObserver(([m])=>{m.isIntersecting&&(d(!0),n.disconnect())},{threshold:.1,rootMargin:"50px"});return h.current&&n.observe(h.current),()=>n.disconnect()},[]);const o={hidden:{opacity:0,y:50,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{duration:.6,delay:l*.1,ease:[.25,.46,.45,.94]}}},u={hover:{y:-8,scale:1.02,transition:{duration:.3,ease:"easeOut"}}},y={hover:{scale:1.1,transition:{duration:.5,ease:"easeOut"}}};return e.jsxs(i.div,{variants:o,initial:"hidden",animate:p?"visible":"hidden",whileHover:"hover",className:"group relative bg-white rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform cursor-pointer",onClick:()=>c(`/book/${r._id}`),children:[e.jsxs(i.div,{className:"relative h-72 overflow-hidden",variants:u,children:[e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent z-10",variants:y}),e.jsx(i.img,{ref:h,src:p?r.image:"",alt:r.name,className:`w-full h-full object-cover ${x?"opacity-100":"opacity-0"}`,loading:"lazy",onLoad:()=>g(!0),variants:y,whileHover:"hover"}),!x&&e.jsx(i.div,{className:"absolute inset-0 bg-gray-200 animate-pulse",initial:{opacity:1},animate:{opacity:x?0:1},transition:{duration:.3}}),e.jsx(i.div,{className:"absolute top-4 left-4 z-20",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+l*.1},children:e.jsx("span",{className:"px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-xs font-semibold text-indigo-600",children:r.category})}),e.jsx(i.div,{className:"absolute top-4 right-4 z-20",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4+l*.1},children:e.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full text-sm font-bold text-white shadow-lg",children:["$",r.price]})}),e.jsx(i.div,{className:"absolute bottom-4 left-4 z-20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+l*.1},children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${r.quantity>5?"bg-green-100 text-green-700":r.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:r.quantity>0?`${r.quantity} in stock`:"Out of stock"})})]}),e.jsxs(i.div,{className:"p-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6+l*.1},children:[e.jsx(i.h3,{className:"font-bold text-xl text-gray-800 mb-2 line-clamp-1 group-hover:text-indigo-600 transition-colors",whileHover:{scale:1.02},children:r.name}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-4",children:r.description||"Discover an amazing reading experience with this carefully selected book."}),r.seller&&e.jsxs(i.div,{className:"flex items-center gap-2 mb-4 pb-4 border-b border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7+l*.1},children:[e.jsx("img",{src:r.seller.image||"https://via.placeholder.com/32",alt:r.seller.name,className:"w-8 h-8 rounded-full object-cover ring-2 ring-gray-100",loading:"lazy"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:r.seller.name||"Unknown"}),e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Verified"]})]})]}),e.jsxs(i.button,{className:"w-full py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transform transition-all duration-200 flex items-center justify-center gap-2",whileHover:{scale:1.05,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8+l*.1},children:[e.jsxs(i.svg,{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",whileHover:{rotate:360},transition:{duration:.5},children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]})]}),e.jsx(i.div,{className:"absolute inset-0 rounded-3xl border-2 border-transparent group-hover:border-indigo-500/30 transition-colors duration-300 pointer-events-none",initial:{opacity:0},whileHover:{opacity:1},transition:{duration:.3}})]})});L.displayName="BookCard";const w=9,R=()=>{const{data:r=[],isLoading:l}=z({queryKey:["books"],queryFn:async()=>(await P("http://localhost:3000/books")).data}),[c,p]=t.useState(""),[d,x]=t.useState(""),[g,h]=t.useState(""),[o,u]=t.useState(1),y=t.useDeferredValue(c),[n,m]=t.useTransition(),B=t.useMemo(()=>[...new Set(r.map(a=>a.category))].filter(Boolean),[r]),v=t.useMemo(()=>{let s=r.filter(a=>a.name.toLowerCase().includes(y.toLowerCase()));return g&&(s=s.filter(a=>a.category===g)),d==="low"?s=[...s].sort((a,j)=>a.price-j.price):d==="high"?s=[...s].sort((a,j)=>j.price-a.price):d==="newest"&&(s=[...s].reverse()),s},[r,y,d,g]),b=Math.ceil(v.length/w),N=v.slice((o-1)*w,o*w),k=t.useCallback(s=>a=>{m(()=>{s(a),u(1)})},[]),S=t.useCallback(s=>{p(s),m(()=>{u(1)})},[]),f=t.useCallback(s=>{m(()=>{u(s)})},[]),C=t.useCallback(()=>{m(()=>{p(""),h(""),x(""),u(1)})},[]);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/30 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 py-12",children:e.jsxs(H,{children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("span",{className:"inline-block px-4 py-2 bg-gradient-to-r from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 text-indigo-700 dark:text-indigo-300 text-sm font-semibold rounded-full mb-4",children:"ðŸ“– Browse Collection"}),e.jsxs("h1",{className:"text-5xl font-bold text-gray-800 mb-4",children:["All"," ",e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Books"})]}),e.jsx("p",{className:"text-gray-500 max-w-2xl mx-auto",children:"Explore our extensive collection of books across various genres. Find your perfect read today!"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search books by name...",value:c,onChange:s=>S(s.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 focus:bg-white transition-all duration-200"}),n&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:g,onChange:s=>k(h)(s.target.value),className:"w-full appearance-none pl-4 pr-10 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 focus:bg-white transition-all duration-200 cursor-pointer",disabled:n,children:[e.jsx("option",{value:"",children:"All Categories"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:s=>k(x)(s.target.value),className:"w-full appearance-none pl-4 pr-10 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/20 focus:bg-white transition-all duration-200 cursor-pointer",disabled:n,children:[e.jsx("option",{value:"",children:"Sort by"}),e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"low",children:"Price: Low to High"}),e.jsx("option",{value:"high",children:"Price: High to Low"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["Showing"," ",e.jsx("span",{className:"font-semibold text-indigo-600",children:N.length})," ","of ",e.jsx("span",{className:"font-semibold",children:v.length})," ","books"]}),(c||g||d)&&e.jsxs("button",{onClick:C,disabled:n,className:"flex items-center gap-1 text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear filters"]})]})]}),l?e.jsx(W,{count:9}):v.length===0?e.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-2xl shadow-lg",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-700 dark:text-white mb-2",children:"No Books Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Try adjusting your search or filter criteria"}),e.jsx("button",{onClick:C,disabled:n,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50",children:"Reset Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-8",children:N.map((s,a)=>e.jsx(L,{book:s,index:a},s._id))}),b>1&&e.jsxs("div",{className:"mt-12 flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("button",{onClick:()=>f(Math.max(1,o-1)),disabled:o===1||n,className:"flex items-center gap-2 px-5 py-2.5 bg-white border-2 border-gray-200 rounded-xl font-medium text-gray-700 hover:border-indigo-500 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:b},(s,a)=>a+1).map(s=>s===1||s===b||s>=o-1&&s<=o+1?e.jsx("button",{onClick:()=>f(s),disabled:n,className:`w-10 h-10 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 ${o===s?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30":"bg-white border-2 border-gray-200 text-gray-700 hover:border-indigo-500 hover:text-indigo-600"}`,children:s},s):s===o-2||s===o+2?e.jsx("span",{className:"text-gray-400",children:"..."},s):null)}),e.jsxs("button",{onClick:()=>f(Math.min(b,o+1)),disabled:o===b||n,className:"flex items-center gap-2 px-5 py-2.5 bg-white border-2 border-gray-200 rounded-xl font-medium text-gray-700 hover:border-indigo-500 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:["Next",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})};export{R as default};

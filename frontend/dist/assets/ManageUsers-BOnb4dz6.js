import{r as d,h as c,j as e,z as i,u as m,i as p,B as h}from"./index-D-tOdqmH.js";import{h as b,z as f,Q as g}from"./dialog-rlaXgZka.js";import"./with-selector--Zn5bBfh.js";const j=({isOpen:s,closeModal:r,user:t,refetch:a})=>{const[l,n]=d.useState(t?.role),x=c(),u=async()=>{try{await x.patch("/update-role",{email:t?.email,role:l}),i.success("Role Updated!"),a()}catch(o){console.log(o),i.error(o?.response?.data?.message)}finally{r()}};return e.jsx(e.Fragment,{children:e.jsx(b,{open:s,as:"div",className:"relative z-10 focus:outline-none",onClose:r,children:e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs(f,{transition:!0,className:"w-full max-w-md rounded-xl bg-white/5 p-6 backdrop-blur-2xl duration-300 ease-out data-closed:transform-[scale(95%)] data-closed:opacity-0 shadow-xl",children:[e.jsx(g,{as:"h3",className:"text-base/7 font-medium text-black",children:"Update User Role"}),e.jsxs("form",{children:[e.jsx("div",{children:e.jsxs("select",{value:l,onChange:o=>n(o.target.value),className:"w-full my-3 border border-gray-200 rounded-xl px-2 py-3",name:"role",id:"",children:[e.jsx("option",{value:"customer",children:"Customer"}),e.jsx("option",{value:"seller",children:"Seller"}),e.jsx("option",{value:"admin",children:"Admin"})]})}),e.jsxs("div",{className:"flex mt-2 justify-around",children:[e.jsx("button",{onClick:u,type:"button",className:"cursor-pointer inline-flex justify-center rounded-md border border-transparent bg-green-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-green-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2",children:"Update"}),e.jsx("button",{type:"button",className:"cursor-pointer inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:r,children:"Cancel"})]})]})]})})})})})},y=({user:s,refetch:r})=>{let[t,a]=d.useState(!1);const l=()=>a(!1);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 ",children:s?.email})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 ",children:s?.role})}),e.jsxs("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:[e.jsxs("span",{onClick:()=>a(!0),className:"relative cursor-pointer inline-block px-3 py-1 font-semibold text-green-900 leading-tight",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0 bg-green-200 opacity-50 rounded-full"}),e.jsx("span",{className:"relative",children:"Update Role"})]}),e.jsx(j,{user:s,refetch:r,isOpen:t,closeModal:l})]})]})},U=()=>{const{user:s}=m(),r=c(),{data:t=[],isLoading:a,refetch:l}=p({queryKey:["users",s?.email],queryFn:async()=>(await r("/users")).data});return console.log(t),a?e.jsx(h,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"container mx-auto px-4 sm:px-8",children:e.jsx("div",{className:"py-8",children:e.jsx("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full leading-normal",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-5 py-3 bg-white  border-b border-gray-200 text-gray-800  text-left text-sm uppercase font-normal",children:"Email"}),e.jsx("th",{scope:"col",className:"px-5 py-3 bg-white  border-b border-gray-200 text-gray-800  text-left text-sm uppercase font-normal",children:"Role"}),e.jsx("th",{scope:"col",className:"px-5 py-3 bg-white  border-b border-gray-200 text-gray-800  text-left text-sm uppercase font-normal",children:"Action"})]})}),e.jsx("tbody",{children:t.map(n=>e.jsx(y,{refetch:l,user:n},n?._id))})]})})})})})})};export{U as default};

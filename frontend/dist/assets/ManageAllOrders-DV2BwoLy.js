import{h as c,c as m,r as i,j as e,i as p}from"./index-D-tOdqmH.js";import{L as b}from"./LoadingSpinner-C_T4IjIo.js";import{u}from"./useMutation-BQtBaTbt.js";const h=({order:r,customerCount:a=0})=>{const l=c(),n=m(),[s,t]=i.useState(r?.status||"pending"),{mutateAsync:o,isPending:d}=u({mutationFn:async()=>l.patch(`/orders/${r._id}`,{status:s}),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-orders"]})}});return e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900",children:r?.name})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900",children:r?.customer})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900",children:a})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("p",{className:"text-gray-900",children:["$",r?.price]})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900",children:r?.quantity})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsxs("select",{value:s,onChange:x=>t(x.target.value),className:"p-1 border-2 border-blue-300 focus:outline-blue-500 rounded-md bg-white",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:e.jsx("button",{onClick:()=>o(),className:"btn btn-sm btn-primary",disabled:d,children:d?"Saving...":"Save"})})]})},N=()=>{const r=c(),{data:a=[],isLoading:l}=p({queryKey:["admin-orders"],queryFn:async()=>{const{data:s}=await r.get("/admin/orders");return s}}),n=i.useMemo(()=>{const s={};return a.forEach(t=>{s[t.customer]=(s[t.customer]||0)+1}),s},[a]);return l?e.jsx(b,{}):e.jsx("div",{className:"container mx-auto px-4 sm:px-8",children:e.jsxs("div",{className:"py-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"All Orders"}),e.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:Object.entries(n).map(([s,t])=>e.jsxs("div",{className:"badge badge-lg gap-2",children:[e.jsx("span",{className:"font-medium",children:s}),e.jsx("span",{className:"opacity-70",children:t})]},s))}),e.jsx("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full leading-normal",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Name"}),e.jsx("th",{className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Customer"}),e.jsx("th",{className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Orders by Customer"}),e.jsx("th",{className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Price"}),e.jsx("th",{className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Quantity"}),e.jsx("th",{className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Status"}),e.jsx("th",{className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm uppercase font-normal",children:"Action"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsx(h,{order:s,customerCount:n[s.customer]||0},s._id))})]})})})]})})};export{N as default};
